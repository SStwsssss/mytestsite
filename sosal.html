<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>SStwendRT Chat</title>
  <style>
    body { font: 16px sans-serif; max-width: 600px; margin: 20px auto; }
    #chat { border: 1px solid #ccc; height: 300px; overflow-y: auto; padding: 10px; }
    #msg { width: 80%; padding: 8px; }
    #send { padding: 8px; }
  </style>
</head>
<body>
  <h2>P.D.A</h2></h2>
  <div id="chat"></div>
  <br>
  <input id="nick" placeholder="Choose Name" maxlength="15"> 
  <input id="msg" placeholder="Input Messange" disabled>
  <button id="send" disabled>âž¤</button>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  <script>
    const db = firebase.initializeApp({
      databaseURL: "https://my-chat-site-2d226-default-rtdb.firebaseio.com/"
    }).database();
    const chat = document.getElementById('chat');
    const nickInp = document.getElementById('nick');
    const msgInp = document.getElementById('msg');
    const sendBtn = document.getElementById('send');
nickInp.oninput = () => {
  const n = nickInp.value.trim();
  msgInp.disabled = !n;
  sendBtn.disabled = !n;
};
    sendBtn.onclick = send;
    msgInp.onkeypress = e => { if (e.key === 'Enter') send(); };
    function send() {
      const n = nickInp.value.trim();
      const m = msgInp.value.trim();
      if (!n || !m) return;
      db.ref('messages').push({ nick: n, text: m, ts: Date.now() });
      msgInp.value = '';
    }
    db.ref('messages').limitToLast(50).on('child_added', snap => {
      const { nick, text } = snap.val();
      const div = document.createElement('div');
      div.innerHTML = `<b>${nick}</b>: ${text}`;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    });
  </script>
</body>
</html>
